<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lấy lại mật khẩu</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
  <style>
    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      33% { transform: translateY(-10px) rotate(1deg); }
      66% { transform: translateY(5px) rotate(-1deg); }
    }
    
    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 20px rgba(99, 102, 241, 0.3); }
      50% { box-shadow: 0 0 30px rgba(99, 102, 241, 0.5); }
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes shimmer {
      0% { background-position: -468px 0; }
      100% { background-position: 468px 0; }
    }
    
    .animate-float {
      animation: float 6s ease-in-out infinite;
    }
    
    .animate-pulse-glow {
      animation: pulse-glow 2s ease-in-out infinite;
    }
    
    .animate-fade-in-up {
      animation: fadeInUp 0.6s ease-out forwards;
    }
    
    .glass-morphism {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .shimmer {
      background: linear-gradient(to right, transparent, rgba(255,255,255,0.3), transparent);
      background-size: 200% 100%;
      animation: shimmer 2s infinite;
    }
    
    .input-glow:focus {
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1), 0 0 20px rgba(99, 102, 241, 0.2);
    }
    
    .gradient-text {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .floating-shapes::before,
    .floating-shapes::after {
      content: '';
      position: absolute;
      border-radius: 50%;
      background: linear-gradient(45deg, rgba(99, 102, 241, 0.1), rgba(79, 70, 229, 0.1));
      z-index: -1;
    }
    
    .floating-shapes::before {
      width: 200px;
      height: 200px;
      top: -100px;
      right: -100px;
      animation: float 8s ease-in-out infinite;
    }
    
    .floating-shapes::after {
      width: 150px;
      height: 150px;
      bottom: -75px;
      left: -75px;
      animation: float 6s ease-in-out infinite reverse;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-indigo-500 via-purple-500 to-blue-600 flex items-center justify-center min-h-screen px-4 relative overflow-hidden">
  <!-- Background decorative elements -->
  <div class="absolute inset-0 overflow-hidden">
    <div class="absolute -top-40 -right-40 w-80 h-80 bg-white opacity-10 rounded-full blur-3xl animate-pulse"></div>
    <div class="absolute -bottom-40 -left-40 w-96 h-96 bg-indigo-300 opacity-10 rounded-full blur-3xl animate-pulse delay-1000"></div>
    <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-purple-300 opacity-5 rounded-full blur-3xl animate-ping"></div>
  </div>

  <div class="glass-morphism p-8 md:p-12 rounded-3xl shadow-2xl max-w-md w-full border border-white/20 transition-all duration-500 hover:shadow-3xl animate-fade-in-up floating-shapes relative">
    <!-- Header Section -->
    <div class="flex flex-col items-center mb-8">
      <div class="relative mb-6">
        <div class="bg-gradient-to-br from-indigo-400 to-purple-500 rounded-full p-6 shadow-lg animate-float animate-pulse-glow">
          <i class="fa fa-key text-5xl text-white"></i>
        </div>
        <div class="absolute -top-2 -right-2 w-6 h-6 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full animate-ping"></div>
      </div>
      
      <h2 class="text-3xl md:text-4xl font-bold text-center mb-3 gradient-text tracking-wide">
        Khôi phục mật khẩu
      </h2>
      
      <div class="w-16 h-1 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full mb-4"></div>
      
      <p class="text-gray-600 text-center text-sm md:text-base leading-relaxed px-2">
        Đừng lo lắng! Chúng tôi sẽ giúp bạn lấy lại quyền truy cập vào tài khoản một cách 
        <span class="font-semibold text-indigo-600">an toàn</span> và 
        <span class="font-semibold text-purple-600">nhanh chóng</span>.
      </p>
    </div>

    <!-- Form Section -->
    <form method="post" action="/forgot-password" class="space-y-6">
      <div class="relative group">
        <div class="absolute inset-0 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-xl opacity-0 group-hover:opacity-10 transition-opacity blur"></div>
        <input 
          type="text" 
          name="email" 
          placeholder="Email hoặc tên đăng nhập" 
          required
          class="peer w-full py-4 pl-14 pr-4 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-transparent transition-all duration-300 shadow-sm bg-white/80 backdrop-blur-sm input-glow text-gray-700 placeholder-gray-400"
        />
        <i class="fa fa-envelope absolute left-4 top-4 text-gray-400 peer-focus:text-indigo-500 transition-colors duration-300 text-lg"></i>
        <div class="absolute inset-x-0 bottom-0 h-0.5 bg-gradient-to-r from-indigo-500 to-purple-500 scale-x-0 peer-focus:scale-x-100 transition-transform duration-300 rounded-full"></div>
      </div>
      
      <button 
        type="submit"
        class="group relative w-full bg-gradient-to-r from-indigo-500 via-purple-500 to-indigo-600 hover:from-indigo-600 hover:via-purple-600 hover:to-indigo-700 text-white py-4 rounded-xl font-semibold transition-all duration-300 shadow-lg hover:shadow-xl hover:scale-[1.02] transform active:scale-[0.98] overflow-hidden"
      >
        <span class="relative z-10 flex items-center justify-center gap-2">
          <i class="fa fa-paper-plane text-lg"></i>
          Gửi hướng dẫn khôi phục
        </span>
        <div class="absolute inset-0 shimmer opacity-0 group-hover:opacity-100 transition-opacity"></div>
      </button>
    </form>

    <!-- Message Sections -->
    {% if message %}
    <div class="flex items-start gap-3 mt-6 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 text-green-800 px-4 py-4 rounded-xl shadow-sm animate-fade-in-up backdrop-blur-sm">
      <div class="bg-green-100 rounded-full p-2 flex-shrink-0 mt-0.5">
        <i class="fa fa-check-circle text-lg text-green-600"></i>
      </div>
      <div>
        <p class="font-semibold text-sm mb-1">Thành công!</p>
        <p class="text-sm leading-relaxed">{{ message }}</p>
      </div>
    </div>
    {% endif %}

    {% if error %}
    <div class="flex items-start gap-3 mt-6 bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 text-red-800 px-4 py-4 rounded-xl shadow-sm animate-fade-in-up backdrop-blur-sm">
      <div class="bg-red-100 rounded-full p-2 flex-shrink-0 mt-0.5">
        <i class="fa fa-exclamation-triangle text-lg text-red-600"></i>
      </div>
      <div>
        <p class="font-semibold text-sm mb-1">Có lỗi xảy ra!</p>
        <p class="text-sm leading-relaxed">{{ error }}</p>
      </div>
    </div>
    {% endif %}

    <!-- Additional Help Section -->
    <div class="mt-8 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-100">
      <div class="flex items-center gap-2 mb-2">
        <i class="fa fa-lightbulb text-blue-500"></i>
        <h3 class="font-semibold text-blue-800 text-sm">Mẹo hữu ích</h3>
      </div>
      <ul class="text-xs text-blue-700 space-y-1 ml-6">
        <li>• Kiểm tra hộp thư spam nếu không thấy email</li>
        <li>• Email sẽ được gửi trong vòng 5-10 phút</li>
        <li>• Liên kết chỉ có hiệu lực trong 30 phút</li>
      </ul>
    </div>

    <!-- Footer Section -->
    <div class="mt-8 text-center space-y-4">
      <div class="w-full h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent"></div>
      
      <div class="flex flex-col sm:flex-row items-center justify-center gap-4 text-sm">
        <a 
          href="/login" 
          class="group flex items-center gap-2 text-indigo-600 font-medium hover:text-indigo-700 transition-colors duration-300"
        >
          <i class="fa fa-arrow-left group-hover:-translate-x-1 transition-transform duration-300"></i>
          Quay lại đăng nhập
        </a>
        
        <span class="hidden sm:block text-gray-400">|</span>
        
        <a 
          href="/register" 
          class="group flex items-center gap-2 text-purple-600 font-medium hover:text-purple-700 transition-colors duration-300"
        >
          <i class="fa fa-user-plus group-hover:scale-110 transition-transform duration-300"></i>
          Tạo tài khoản mới
        </a>
      </div>
    </div>
  </div>

  <script>
    // Add loading state to form submission
    document.querySelector('form').addEventListener('submit', function(e) {
      const button = this.querySelector('button[type="submit"]');
      const originalText = button.innerHTML;
      
      button.innerHTML = `
        <span class="flex items-center justify-center gap-2">
          <i class="fa fa-spinner fa-spin"></i>
          Đang gửi...
        </span>
      `;
      button.disabled = true;
      
      // Re-enable button after 5 seconds (in case of network issues)
      setTimeout(() => {
        button.innerHTML = originalText;
        button.disabled = false;
      }, 5000);
    });

    // Add input validation feedback
    document.querySelector('input[name="email"]').addEventListener('input', function(e) {
      const input = e.target;
      const value = input.value.trim();
      
      // Simple email validation
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      const isEmail = emailRegex.test(value);
      const isUsername = value.length >= 3 && /^[a-zA-Z0-9_]+$/.test(value);
      
      if (value && (isEmail || isUsername)) {
        input.classList.add('border-green-300', 'bg-green-50');
        input.classList.remove('border-red-300', 'bg-red-50');
      } else if (value) {
        input.classList.add('border-red-300', 'bg-red-50');
        input.classList.remove('border-green-300', 'bg-green-50');
      } else {
        input.classList.remove('border-green-300', 'bg-green-50', 'border-red-300', 'bg-red-50');
      }
    });
  </script>
</body>
</html>
